{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ambrusk\\\\Desktop\\\\library_repo\\\\osszes\\\\lbp_Teljes\\\\src\\\\AvatarSelector.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './AvatarSelector.css';\nimport jwt_decode from './jwt_decode';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { useLanguage } from './LanguageProvider'; // Hozzáadjuk a nyelvforgató hookot\nimport quest1_logo from './img/quest1_prof_picture.png';\nimport quest2_logo from './img/quest2_prof_picture.png';\nimport teacher1_logo from './img/teacher1_prof_picture.png';\nimport teacher2_logo from './img/teacher2_prof_picture.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AvatarSelector({\n  onClose\n}) {\n  _s();\n  const {\n    translations\n  } = useLanguage();\n  const [isAdmin, setIsAdmin] = useState(false);\n  const avatarlogos = [teacher1_logo, teacher2_logo, quest1_logo, quest2_logo];\n  useEffect(() => {\n    const fetchProfilePicturePath = async () => {\n      try {\n        const troken = localStorage.getItem('authToken');\n        if (troken) {\n          const decodedToken = jwt_decode(troken);\n          setIsAdmin(decodedToken.role === 'Admin');\n        }\n      } catch (error) {\n        console.error('Error fetching profile picture path:', error);\n      }\n    };\n    fetchProfilePicturePath();\n  }, []);\n  const handleAvatarClick = async (avatar, index) => {\n    try {\n      const troken = localStorage.getItem('authToken');\n      if (troken) {\n        const decodedToken = jwt_decode(troken);\n        if (decodedToken && decodedToken.dns) {\n          const response = await fetch(`https://localhost:7275/profilkepvaltas/${decodedToken.dns}?profId=${index + 2}`, {\n            method: 'PUT',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${troken}`\n            },\n            body: JSON.stringify({\n              avatarId: avatar.id\n            })\n          });\n          if (response.ok) {\n            toast.success('Avatar successfully changed!');\n            setTimeout(() => {\n              window.location.reload();\n            }, 6100);\n          } else {\n            toast.error('Something went wrong');\n            console.error('Hiba történt az avatar frissítése során:', response.statusText);\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Hiba történt az avatar frissítése során:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"avatar-selector-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Avatar Selector\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onClose,\n      children: \"Close\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"avatars-container\",\n      children: avatarlogos.map((avatar, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"avatar-item\",\n        children: isAdmin || index >= avatarlogos.length - 2 ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAvatarClick(avatar, index),\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: avatar,\n            alt: `Avatar ${index + 1}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, this) : null\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n_s(AvatarSelector, \"YjiLmrwzwPOQLdPS+lHrtJKdLDg=\", false, function () {\n  return [useLanguage];\n});\n_c = AvatarSelector;\nexport default AvatarSelector;\nvar _c;\n$RefreshReg$(_c, \"AvatarSelector\");","map":{"version":3,"names":["React","useState","useEffect","jwt_decode","ToastContainer","toast","useLanguage","quest1_logo","quest2_logo","teacher1_logo","teacher2_logo","jsxDEV","_jsxDEV","AvatarSelector","onClose","_s","translations","isAdmin","setIsAdmin","avatarlogos","fetchProfilePicturePath","troken","localStorage","getItem","decodedToken","role","error","console","handleAvatarClick","avatar","index","dns","response","fetch","method","headers","body","JSON","stringify","avatarId","id","ok","success","setTimeout","window","location","reload","statusText","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","length","src","alt","_c","$RefreshReg$"],"sources":["C:/Users/ambrusk/Desktop/library_repo/osszes/lbp_Teljes/src/AvatarSelector.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './AvatarSelector.css';\r\nimport jwt_decode from './jwt_decode';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { useLanguage } from './LanguageProvider'; // Hozzáadjuk a nyelvforgató hookot\r\nimport quest1_logo from './img/quest1_prof_picture.png';\r\nimport quest2_logo from './img/quest2_prof_picture.png';\r\nimport teacher1_logo from './img/teacher1_prof_picture.png';\r\nimport teacher2_logo from './img/teacher2_prof_picture.png';\r\n\r\nfunction AvatarSelector({ onClose }) {\r\n  const { translations } = useLanguage();\r\n\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  const avatarlogos = [teacher1_logo, teacher2_logo, quest1_logo, quest2_logo];\r\n\r\n  useEffect(() => {\r\n    const fetchProfilePicturePath = async () => {\r\n      try {\r\n        const troken = localStorage.getItem('authToken');\r\n        if (troken) {\r\n          const decodedToken = jwt_decode(troken);\r\n            setIsAdmin(decodedToken.role === 'Admin');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching profile picture path:', error);\r\n      }\r\n    };\r\n\r\n    fetchProfilePicturePath();\r\n  }, []);\r\n\r\n  const handleAvatarClick = async (avatar, index) => {\r\n    try {\r\n      const troken = localStorage.getItem('authToken');\r\n      if (troken) {\r\n        const decodedToken = jwt_decode(troken);\r\n        if (decodedToken && decodedToken.dns) {\r\n          const response = await fetch(`https://localhost:7275/profilkepvaltas/${decodedToken.dns}?profId=${index + 2}`, {\r\n            method: 'PUT',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'Authorization': `Bearer ${troken}`\r\n            },\r\n            body: JSON.stringify({ avatarId: avatar.id })\r\n          });\r\n          if (response.ok) {\r\n            toast.success('Avatar successfully changed!');\r\n            setTimeout(() => {\r\n              window.location.reload();\r\n            }, 6100);\r\n          } else {\r\n            toast.error('Something went wrong');\r\n            console.error('Hiba történt az avatar frissítése során:', response.statusText);\r\n            \r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Hiba történt az avatar frissítése során:', error);\r\n      \r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"avatar-selector-container\">\r\n            <h1>Avatar Selector</h1>\r\n      <button onClick={onClose}>Close</button>\r\n      <div className=\"avatars-container\">\r\n        {avatarlogos.map((avatar, index) => (\r\n          <div key={index} className=\"avatar-item\">\r\n            {isAdmin || index >= avatarlogos.length - 2 ? (\r\n              <button onClick={() => handleAvatarClick(avatar, index)}>\r\n                <img src={avatar} alt={`Avatar ${index + 1}`} />\r\n              </button>\r\n            ) : null}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <ToastContainer />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AvatarSelector;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAO,sBAAsB;AAC7B,OAAOC,UAAU,MAAM,cAAc;AACrC,SAASC,cAAc,EAAEC,KAAK,QAAQ,gBAAgB;AACtD,OAAO,uCAAuC;AAC9C,SAASC,WAAW,QAAQ,oBAAoB,CAAC,CAAC;AAClD,OAAOC,WAAW,MAAM,+BAA+B;AACvD,OAAOC,WAAW,MAAM,+BAA+B;AACvD,OAAOC,aAAa,MAAM,iCAAiC;AAC3D,OAAOC,aAAa,MAAM,iCAAiC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5D,SAASC,cAAcA,CAAC;EAAEC;AAAQ,CAAC,EAAE;EAAAC,EAAA;EACnC,MAAM;IAAEC;EAAa,CAAC,GAAGV,WAAW,CAAC,CAAC;EAEtC,MAAM,CAACW,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAMkB,WAAW,GAAG,CAACV,aAAa,EAAEC,aAAa,EAAEH,WAAW,EAAEC,WAAW,CAAC;EAE5EN,SAAS,CAAC,MAAM;IACd,MAAMkB,uBAAuB,GAAG,MAAAA,CAAA,KAAY;MAC1C,IAAI;QACF,MAAMC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;QAChD,IAAIF,MAAM,EAAE;UACV,MAAMG,YAAY,GAAGrB,UAAU,CAACkB,MAAM,CAAC;UACrCH,UAAU,CAACM,YAAY,CAACC,IAAI,KAAK,OAAO,CAAC;QAC7C;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sCAAsC,EAAEA,KAAK,CAAC;MAC9D;IACF,CAAC;IAEDN,uBAAuB,CAAC,CAAC;EAC3B,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMQ,iBAAiB,GAAG,MAAAA,CAAOC,MAAM,EAAEC,KAAK,KAAK;IACjD,IAAI;MACF,MAAMT,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;MAChD,IAAIF,MAAM,EAAE;QACV,MAAMG,YAAY,GAAGrB,UAAU,CAACkB,MAAM,CAAC;QACvC,IAAIG,YAAY,IAAIA,YAAY,CAACO,GAAG,EAAE;UACpC,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,0CAAyCT,YAAY,CAACO,GAAI,WAAUD,KAAK,GAAG,CAAE,EAAC,EAAE;YAC7GI,MAAM,EAAE,KAAK;YACbC,OAAO,EAAE;cACP,cAAc,EAAE,kBAAkB;cAClC,eAAe,EAAG,UAASd,MAAO;YACpC,CAAC;YACDe,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;cAAEC,QAAQ,EAAEV,MAAM,CAACW;YAAG,CAAC;UAC9C,CAAC,CAAC;UACF,IAAIR,QAAQ,CAACS,EAAE,EAAE;YACfpC,KAAK,CAACqC,OAAO,CAAC,8BAA8B,CAAC;YAC7CC,UAAU,CAAC,MAAM;cACfC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;YAC1B,CAAC,EAAE,IAAI,CAAC;UACV,CAAC,MAAM;YACLzC,KAAK,CAACqB,KAAK,CAAC,sBAAsB,CAAC;YACnCC,OAAO,CAACD,KAAK,CAAC,0CAA0C,EAAEM,QAAQ,CAACe,UAAU,CAAC;UAEhF;QACF;MACF;IACF,CAAC,CAAC,OAAOrB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,0CAA0C,EAAEA,KAAK,CAAC;IAElE;EACF,CAAC;EAED,oBACEd,OAAA;IAAKoC,SAAS,EAAC,2BAA2B;IAAAC,QAAA,gBAClCrC,OAAA;MAAAqC,QAAA,EAAI;IAAe;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC9BzC,OAAA;MAAQ0C,OAAO,EAAExC,OAAQ;MAAAmC,QAAA,EAAC;IAAK;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eACxCzC,OAAA;MAAKoC,SAAS,EAAC,mBAAmB;MAAAC,QAAA,EAC/B9B,WAAW,CAACoC,GAAG,CAAC,CAAC1B,MAAM,EAAEC,KAAK,kBAC7BlB,OAAA;QAAiBoC,SAAS,EAAC,aAAa;QAAAC,QAAA,EACrChC,OAAO,IAAIa,KAAK,IAAIX,WAAW,CAACqC,MAAM,GAAG,CAAC,gBACzC5C,OAAA;UAAQ0C,OAAO,EAAEA,CAAA,KAAM1B,iBAAiB,CAACC,MAAM,EAAEC,KAAK,CAAE;UAAAmB,QAAA,eACtDrC,OAAA;YAAK6C,GAAG,EAAE5B,MAAO;YAAC6B,GAAG,EAAG,UAAS5B,KAAK,GAAG,CAAE;UAAE;YAAAoB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1C,CAAC,GACP;MAAI,GALAvB,KAAK;QAAAoB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAMV,CACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eACNzC,OAAA,CAACR,cAAc;MAAA8C,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACf,CAAC;AAEV;AAACtC,EAAA,CAzEQF,cAAc;EAAA,QACIP,WAAW;AAAA;AAAAqD,EAAA,GAD7B9C,cAAc;AA2EvB,eAAeA,cAAc;AAAC,IAAA8C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}