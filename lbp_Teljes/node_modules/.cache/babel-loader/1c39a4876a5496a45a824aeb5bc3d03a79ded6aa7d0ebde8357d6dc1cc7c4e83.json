{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ambrusk\\\\Desktop\\\\library_repo\\\\osszes\\\\lbp_Teljes\\\\src\\\\Books.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport './Books.css';\nimport Modal from './Modal';\nimport Loader from './Loader';\nimport BooksPagination from './BooksPagination';\nimport jwt_decode from './jwt_decode';\nimport Popup from './Popup';\nimport LibraryFilter from './LibraryFilter';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Books = () => {\n  _s();\n  const [selectedBook, setSelectedBook] = useState(null);\n  const [books, setBooks] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [isLoading, setIsLoading] = useState(true);\n  const [decodedrole, setDecodedRole] = useState(\"\");\n  const [showPopup, setShowPopup] = useState(false);\n  const [selectedBookIdForPopup, setSelectedBookIdForPopup] = useState(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch('https://localhost:7275/GuestInformations');\n        const booksData = await response.json();\n        setBooks(booksData);\n        setIsLoading(false);\n      } catch (error) {\n        console.error('Error fetching data:', error);\n        setIsLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n  useEffect(() => {\n    const fetchProfilePicturePath = async () => {\n      try {\n        const token = localStorage.getItem('authToken');\n        if (token) {\n          const decodedToken = jwt_decode(token);\n          const response = await fetch(`https://localhost:7275/önkép/${decodedToken.dns}`);\n          if (response.ok) {\n            const data = await response.json();\n            if (data != null) {\n              setDecodedRole(decodedToken.role === \"Admin\");\n            } else {\n              console.error('Nincs profilkép az adatokban');\n            }\n          } else {\n            console.error('Hiba történt a profilkép lekérésekor:', response.status);\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching profile picture path:', error);\n      }\n    };\n    fetchProfilePicturePath();\n  }, []);\n  useEffect(() => {\n    setCurrentPage(1); // Reset currentPage to 1 when LibraryFilter is clicked\n  }, []);\n  const totalPages = Math.ceil(books.length / 12);\n  const startIndex = (currentPage - 1) * 12;\n  const endIndex = startIndex + 12;\n  const currentBooks = books.slice(startIndex, endIndex);\n  const handleInfoClick = bookId => {\n    const book = books.find(book => book.id === bookId);\n    if (book) {\n      setSelectedBook(book);\n      document.body.style.overflow = 'hidden';\n    } else {\n      console.error(`Book with id ${bookId} not found.`);\n    }\n  };\n  const handleCloseModal = () => {\n    setSelectedBook(null);\n    document.body.style.overflow = 'auto';\n  };\n  const handlePopupOpen = bookId => {\n    setSelectedBookIdForPopup(bookId);\n    setShowPopup(true);\n    document.body.style.overflow = 'hidden';\n  };\n\n  /*const handlePopupClose = () => {\r\n    setShowPopup(false);\r\n    document.body.style.overflow = 'auto'; \r\n  };*/\n\n  const handleFilterSubmit = useCallback(filteredBooks => {\n    setBooks(filteredBooks);\n    setCurrentPage(1); // Reset currentPage to 1 when filtering books\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"FilterSelection\",\n    children: [/*#__PURE__*/_jsxDEV(LibraryFilter, {\n      onSubmit: handleFilterSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"page-content\",\n      children: [isLoading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 23\n      }, this), !isLoading && currentBooks.map(book => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        style: {\n          backgroundImage: `url(${book.bookImg})`\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"title\",\n            children: book.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"btn-container\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn\",\n              onClick: () => handleInfoClick(book.id),\n              children: \"Info\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this)\n      }, book.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this)), selectedBook && /*#__PURE__*/_jsxDEV(Modal, {\n        book: selectedBook,\n        onClose: handleCloseModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BooksPagination, {\n      currentPage: currentPage,\n      totalPages: totalPages,\n      setCurrentPage: setCurrentPage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n};\n_s(Books, \"rxBokmO68Hka4pPzRVLB4LDu990=\");\n_c = Books;\nexport default Books;\nvar _c;\n$RefreshReg$(_c, \"Books\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Modal","Loader","BooksPagination","jwt_decode","Popup","LibraryFilter","jsxDEV","_jsxDEV","Books","_s","selectedBook","setSelectedBook","books","setBooks","currentPage","setCurrentPage","isLoading","setIsLoading","decodedrole","setDecodedRole","showPopup","setShowPopup","selectedBookIdForPopup","setSelectedBookIdForPopup","fetchData","response","fetch","booksData","json","error","console","fetchProfilePicturePath","token","localStorage","getItem","decodedToken","dns","ok","data","role","status","totalPages","Math","ceil","length","startIndex","endIndex","currentBooks","slice","handleInfoClick","bookId","book","find","id","document","body","style","overflow","handleCloseModal","handlePopupOpen","handleFilterSubmit","filteredBooks","className","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","map","backgroundImage","bookImg","title","onClick","onClose","_c","$RefreshReg$"],"sources":["C:/Users/ambrusk/Desktop/library_repo/osszes/lbp_Teljes/src/Books.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport './Books.css';\r\nimport Modal from './Modal';\r\nimport Loader from './Loader';\r\nimport BooksPagination from './BooksPagination';\r\nimport jwt_decode from './jwt_decode';\r\nimport Popup from './Popup';\r\nimport LibraryFilter from './LibraryFilter';\r\n\r\nconst Books = () => {\r\n  const [selectedBook, setSelectedBook] = useState(null);\r\n  const [books, setBooks] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [decodedrole, setDecodedRole] = useState(\"\");\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [selectedBookIdForPopup, setSelectedBookIdForPopup] = useState(null); \r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await fetch('https://localhost:7275/GuestInformations');\r\n        const booksData = await response.json();\r\n        setBooks(booksData);\r\n        setIsLoading(false);\r\n      } catch (error) {\r\n        console.error('Error fetching data:', error);\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData(); \r\n  }, []); \r\n\r\n  useEffect(() => {\r\n    const fetchProfilePicturePath = async () => {\r\n      try {\r\n        const token = localStorage.getItem('authToken');\r\n        if (token) {\r\n          const decodedToken = jwt_decode(token);\r\n          const response = await fetch(`https://localhost:7275/önkép/${decodedToken.dns}`);\r\n          if (response.ok) {\r\n            const data = await response.json();\r\n            if (data != null) {\r\n              setDecodedRole(decodedToken.role === \"Admin\");\r\n            } else {\r\n              console.error('Nincs profilkép az adatokban');\r\n            }\r\n          } else {\r\n            console.error('Hiba történt a profilkép lekérésekor:', response.status);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching profile picture path:', error);\r\n      }\r\n    };\r\n\r\n    fetchProfilePicturePath();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setCurrentPage(1); // Reset currentPage to 1 when LibraryFilter is clicked\r\n  }, []);\r\n\r\n  const totalPages = Math.ceil(books.length / 12);\r\n  const startIndex = (currentPage - 1) * 12;\r\n  const endIndex = startIndex + 12;\r\n  const currentBooks = books.slice(startIndex, endIndex);\r\n\r\n  const handleInfoClick = (bookId) => {\r\n    const book = books.find((book) => book.id === bookId);\r\n    if (book) {\r\n      setSelectedBook(book);\r\n      document.body.style.overflow = 'hidden'; \r\n    } else {\r\n      console.error(`Book with id ${bookId} not found.`);\r\n    }\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setSelectedBook(null);\r\n    document.body.style.overflow = 'auto'; \r\n  };\r\n\r\n  const handlePopupOpen = (bookId) => {\r\n    setSelectedBookIdForPopup(bookId);\r\n    setShowPopup(true);\r\n    document.body.style.overflow = 'hidden'; \r\n  };\r\n\r\n  /*const handlePopupClose = () => {\r\n    setShowPopup(false);\r\n    document.body.style.overflow = 'auto'; \r\n  };*/\r\n\r\n  const handleFilterSubmit = useCallback((filteredBooks) => {\r\n    setBooks(filteredBooks);\r\n    setCurrentPage(1); // Reset currentPage to 1 when filtering books\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"FilterSelection\">\r\n      <LibraryFilter onSubmit={handleFilterSubmit} />\r\n      <main className=\"page-content\">\r\n        {isLoading && <Loader />}\r\n        {!isLoading && currentBooks.map((book) => (\r\n          <div key={book.id} className=\"card\" style={{ backgroundImage: `url(${book.bookImg})` }}>\r\n            <div className=\"content\">\r\n              <h2 className=\"title\">{book.title}</h2>\r\n              <div className=\"btn-container\">\r\n                <button className=\"btn\" onClick={() => handleInfoClick(book.id)}>Info</button>\r\n                {/*decodedrole && <button className=\"btn\" onClick={() => handlePopupOpen(book.id)}>Change</button>*/}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}  \r\n        {selectedBook && <Modal book={selectedBook} onClose={handleCloseModal} />} \r\n        {/*showPopup && <Popup onClose={handlePopupClose} bookId={selectedBookIdForPopup} />*/} \r\n      </main>\r\n      <BooksPagination currentPage={currentPage} totalPages={totalPages} setCurrentPage={setCurrentPage} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Books;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}