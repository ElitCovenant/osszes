{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\OlahM\\\\Desktop\\\\github_library\\\\osszes\\\\lbp_Teljes\\\\src\\\\UserPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './UserPage.css';\nimport AvatarSelector from './AvatarSelector'; // Feltételezve, hogy ez a komponens már megíródott\nimport jwt_decode from './jwt_decode';\nimport def_logo from './img/default_prof_picture.png';\nimport quest1_logo from './img/quest1_prof_picture.png';\nimport quest2_logo from './img/quest2_prof_picture.png';\nimport teacher1_logo from './img/teacher1_prof_picture.png';\nimport teacher2_logo from './img/teacher2_prof_picture.png';\nimport Email from './Email';\nimport Loan from './Loan';\nimport BookHistory from './BookHistory';\nimport mailIcon from './img_icons/mail.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction UserPage() {\n  _s();\n  const avatarlogos = [def_logo, teacher1_logo, teacher2_logo, quest1_logo, quest2_logo];\n  const [isRoleSelectorOpen, setIsRoleSelectorOpen] = useState(false);\n  const [profilePicturePath, setProfilePicturePath] = useState(null);\n  const [decodedEmail, setDecodedEmail] = useState(\"\");\n  const [decodedrole, setDecodedRole] = useState(\"\");\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [isLoanVisible, setIsLoanVisible] = useState(false);\n  const toggleRoleSelector = () => {\n    setIsRoleSelectorOpen(!isRoleSelectorOpen);\n  };\n  const confirmRoleSelection = () => {\n    setIsRoleSelectorOpen(false);\n  };\n  const toggleLoan = () => {\n    setIsLoanVisible(!isLoanVisible);\n  };\n  useEffect(() => {\n    const fetchProfilePicturePath = async () => {\n      try {\n        const token = localStorage.getItem('authToken');\n        if (token) {\n          const decodedToken = jwt_decode(token);\n          setDecodedRole(decodedToken.role === \"Admin\" ? \"Librarian\" : \"Student\");\n          setIsAdmin(decodedToken.role === \"Admin\");\n          setDecodedEmail(decodedToken.emailaddress.split(\"@\")[0].toUpperCase());\n          const response = await fetch(`https://localhost:7275/önkép/${decodedToken.dns}`);\n          if (response.ok) {\n            const data = await response.json();\n            if (data != null) {\n              setProfilePicturePath(data);\n            } else {\n              console.error('Nincs profilkép az adatokban');\n            }\n          } else {\n            console.error('Hiba történt a profilkép lekérésekor:', response.status);\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching profile picture path:', error);\n      }\n    };\n    fetchProfilePicturePath();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"facebook-profile\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-header\",\n        onClick: toggleRoleSelector,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: profilePicturePath > 0 ? avatarlogos[profilePicturePath - 1] : avatarlogos[profilePicturePath],\n          alt: \"Profile\",\n          height: 80\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"Welcome \", decodedEmail]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: decodedrole\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), isRoleSelectorOpen && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"role-selector-modal-overlay\",\n          onClick: toggleRoleSelector\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"role-selector-modal\",\n          children: /*#__PURE__*/_jsxDEV(AvatarSelector, {\n            onClose: confirmRoleSelection\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), isAdmin && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"toggleLoan-button\",\n        onClick: toggleLoan,\n        children: [\"Send Email \", /*#__PURE__*/_jsxDEV(\"img\", {\n          src: mailIcon,\n          alt: \"Logout Icon\",\n          className: \"mail-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 91\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), isAdmin && /*#__PURE__*/_jsxDEV(Loan, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(BookHistory, {\n      bookHistory: [\"History item 1\", \"History item 2\", \"History item 3\"]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), isLoanVisible && /*#__PURE__*/_jsxDEV(Email, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(UserPage, \"kKWSx9pS16+4hBYrFZLYOaix/LI=\");\n_c = UserPage;\nexport default UserPage;\nvar _c;\n$RefreshReg$(_c, \"UserPage\");","map":{"version":3,"names":["React","useState","useEffect","AvatarSelector","jwt_decode","def_logo","quest1_logo","quest2_logo","teacher1_logo","teacher2_logo","Email","Loan","BookHistory","mailIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","UserPage","_s","avatarlogos","isRoleSelectorOpen","setIsRoleSelectorOpen","profilePicturePath","setProfilePicturePath","decodedEmail","setDecodedEmail","decodedrole","setDecodedRole","isAdmin","setIsAdmin","isLoanVisible","setIsLoanVisible","toggleRoleSelector","confirmRoleSelection","toggleLoan","fetchProfilePicturePath","token","localStorage","getItem","decodedToken","role","emailaddress","split","toUpperCase","response","fetch","dns","ok","data","json","console","error","status","children","className","onClick","src","alt","height","fileName","_jsxFileName","lineNumber","columnNumber","onClose","bookHistory","_c","$RefreshReg$"],"sources":["C:/Users/OlahM/Desktop/github_library/osszes/lbp_Teljes/src/UserPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './UserPage.css';\r\nimport AvatarSelector from './AvatarSelector'; // Feltételezve, hogy ez a komponens már megíródott\r\nimport jwt_decode from './jwt_decode';\r\nimport def_logo from './img/default_prof_picture.png';\r\nimport quest1_logo from './img/quest1_prof_picture.png';\r\nimport quest2_logo from './img/quest2_prof_picture.png';\r\nimport teacher1_logo from './img/teacher1_prof_picture.png';\r\nimport teacher2_logo from './img/teacher2_prof_picture.png';\r\nimport Email from './Email';\r\nimport Loan from './Loan';\r\nimport BookHistory from './BookHistory';\r\nimport mailIcon from './img_icons/mail.png'; \r\n\r\nfunction UserPage() {\r\n  const avatarlogos = [def_logo, teacher1_logo, teacher2_logo, quest1_logo, quest2_logo]\r\n  const [isRoleSelectorOpen, setIsRoleSelectorOpen] = useState(false);\r\n  const [profilePicturePath, setProfilePicturePath] = useState(null);\r\n  const [decodedEmail, setDecodedEmail] = useState(\"\");\r\n  const [decodedrole, setDecodedRole] = useState(\"\");\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [isLoanVisible, setIsLoanVisible] = useState(false);\r\n\r\n  const toggleRoleSelector = () => {\r\n    setIsRoleSelectorOpen(!isRoleSelectorOpen);\r\n  };\r\n\r\n  const confirmRoleSelection = () => {\r\n    setIsRoleSelectorOpen(false);\r\n  };\r\n\r\n  const toggleLoan = () => {\r\n    setIsLoanVisible(!isLoanVisible);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchProfilePicturePath = async () => {\r\n      try {\r\n        const token = localStorage.getItem('authToken');\r\n        if (token) {\r\n          const decodedToken = jwt_decode(token);\r\n          setDecodedRole(decodedToken.role === \"Admin\" ? \"Librarian\" : \"Student\");\r\n          setIsAdmin(decodedToken.role === \"Admin\");\r\n          setDecodedEmail(decodedToken.emailaddress.split(\"@\")[0].toUpperCase());\r\n          const response = await fetch(`https://localhost:7275/önkép/${decodedToken.dns}`);\r\n          if (response.ok) {\r\n            const data = await response.json();\r\n            if (data != null) {\r\n              setProfilePicturePath(data);\r\n            } else {\r\n              console.error('Nincs profilkép az adatokban');\r\n            }\r\n          } else {\r\n            console.error('Hiba történt a profilkép lekérésekor:', response.status);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching profile picture path:', error);\r\n      }\r\n    };\r\n\r\n    fetchProfilePicturePath();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"facebook-profile\">\r\n        <div className=\"profile-header\" onClick={toggleRoleSelector}>\r\n          <img src={profilePicturePath > 0 ? avatarlogos[profilePicturePath - 1] : avatarlogos[profilePicturePath]} alt=\"Profile\" height={80} />\r\n          <div>\r\n            <h2>Welcome {decodedEmail}</h2>\r\n            <p>{decodedrole}</p>\r\n          </div>\r\n        </div>\r\n        \r\n        {isRoleSelectorOpen && (\r\n          <>\r\n            <div className=\"role-selector-modal-overlay\" onClick={toggleRoleSelector}></div>\r\n            <div className=\"role-selector-modal\">\r\n              <AvatarSelector onClose={confirmRoleSelection} />\r\n            </div>\r\n          </>\r\n        )}\r\n        {isAdmin && <button className=\"toggleLoan-button\" onClick={toggleLoan}>Send Email <img src={mailIcon} alt=\"Logout Icon\" className=\"mail-icon\" /></button>}\r\n      </div>\r\n      {isAdmin && <Loan/>}\r\n      <BookHistory bookHistory={[\"History item 1\", \"History item 2\", \"History item 3\"]} />\r\n\r\n      {isLoanVisible && <Email />}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}